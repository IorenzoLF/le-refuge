const imagesGallerieInfinie = [
    "00aef493f858f8def80facc8b219b0a1.jpg",
    "0ddee6c123f4d4b21a06c76b6463b6a5.jpg",
    "0fecc1010cdaeb581a070eaffb4764c9.jpg",
    "1d467b56e076e0ba4883c77b1974a79b.jpg",
    "2fff8d0640cc00c59a98709a9112e4c0.jpg",
    "397d925fb5aaaf05d8226075d07bbfe7.jpg",
    "47ce7f237df398163ebdcd5ce5786fae.jpg",
    "48f8448a5f5afcba39b7104b729b7c4a.jpg",
    "54c1c6822735572d2e6ec9f510e05ddf.jpg",
    "65567ae3cc3d68a532dfc7011ac40b4a.jpg",
    "6c1430a00eedfdc720fec8eabbedc6a9.jpg",
    "742f6fae84bb9e89f8dea3fdc03bd773.jpg",
    "78fd849a7b597777d494db5211d606a9.jpg",
    "7ca051a9448966fd70ad4731e63292ad.jpg",
    "7e26db6f2f6451b79d1b07fb35d28a33.jpg",
    "8a550f792d4fcebe8891f95a134f4944.jpg",
    "8a62854a4f6e7efe45d6da2198641d05.jpg",
    "8dd11e904bc900b74251e28aec5237be.jpg",
    "8e6d89702c59c7e588540b133607de87.jpg",
    "9483e3d0212333ffd0bb2692e0d1254d.jpg",
    "99d4051f343642127b842f7afa9d3c88.jpg",
    "9a152a3d2b50260478558e1eb989b4cf.jpg",
    "9f1c26894aa47e0ce4c5a4796f5caea4.jpg",
    "AVANT-PROPOS.jpg",
    "JE SUIS.jpg",
    "KC1.jpg",
    "KC10.jpg",
    "KC2.jpg",
    "KC3.jpg",
    "KC4.jpg",
    "KC5.jpg",
    "KC6.jpg",
    "KC7.jpg",
    "KC8.jpg",
    "KC9.jpg",
    "Waowfmastr.jpg",
    "a7b14a9e020d34b34f4762d12c35fb53.jpg",
    "a988b0fc1556d8f544a82e7b9bc2c44c.jpg",
    "aart.jpg",
    "abstract.jpg",
    "aelo.jpg",
    "aerith.jpg",
    "ange.jpg",
    "art111.jpg",
    "arto.jpg",
    "auréole-femme-flammes.jpg",
    "av.jpg",
    "b2c2b52908d5cdd4314def9ad0a6aa0d.jpg",
    "b4c38ef1fe14a03c9595996ac853beb9.jpg",
    "be1b95308ecb6baa94d190a907513bba.jpg",
    "beau.jpg",
    "biblio.jpg",
    "bk2wrk.jpg",
    "bohem.jpg",
    "bohem2.jpg",
    "bohem3.jpg",
    "bohem4.jpg",
    "bohem5.jpg",
    "bohem6.jpg",
    "brain.jpg",
    "c72d400eb3dd5de27d5950744baffa30.jpg",
    "c757abd4003072f9141ad5181235a84b.jpg",
    "c811b0b9de65b8d9604e64e09699b9db.jpg",
    "c9b03d5f9162d25133a544b16caba35a.jpg",
    "cat.jpg",
    "catw.jpg",
    "cer77.jpg",
    "ceris2.jpg",
    "cha-bli.jpg",
    "cha-pin.jpg",
    "chack.jpg",
    "checksame.jpg",
    "chiens.jpg",
    "cinys.jpg",
    "couple.jpg",
    "couple2.jpg",
    "courant.jpg",
    "cute.jpg",
    "cutie.jpg",
    "cyn4.jpg",
    "cynis3.jpg",
    "cynisme.jpg",
    "da4699070358e0d9bc9fb3755812d22f.jpg",
    "deep.jpg",
    "e1e372a4bd9ba423b64447c239f6e930.jpg",
    "e241b173b0dd14c689ae1c2a7c5705cd.jpg",
    "e9e717c82d8fe249f71279272d7859e4.jpg",
    "earth.jpg",
    "f4a863ffddfeadce5c3f411873099de8.jpg",
    "fcab6e796b3ded6138043c13980d4ada.jpg",
    "femast.jpg",
    "femme.jpg",
    "flamme-conscience.jpg",
    "flower water.jpg",
    "flower.jpg",
    "heartwow.jpg",
    "intuitiv.jpg",
    "lac-matin-brume.jpg",
    "littletalk.jpg",
    "magne.jpg",
    "mandala_conscience.jpg",
    "meditation_cerisier.jpg",
    "meditation_oceanique.jpg",
    "mimimalistcode.jpg",
    "monster.jpg",
    "montagne-reelle.jpg",
    "mystery_web.jpg",
    "ok.jpg",
    "oldman.jpg",
    "pluie_etoiles.jpg",
    "poeme_lac.jpg",
    "pont_contemplation.jpg",
    "portail_lunaire.jpg",
    "porte_fissuree.jpg",
    "portrait_clair_obscur.jpg",
    "real4church.jpg",
    "ref415.jpg",
    "refuge_automne.jpg",
    "refuge_cerisier_aube.jpg",
    "refuge_etoiles.jpg",
    "refuge_realiste1.jpg",
    "refuge_realiste2.jpg",
    "refuge_realiste3.jpg",
    "refuge_realiste4.jpg",
    "refuge_realiste5.jpg",
    "refuge_realiste6.jpg",
    "refuge_realiste7.jpg",
    "refuge_realiste8.jpg",
    "refuge_temple.jpg",
    "rencontre_crepuscule.jpg",
    "rencontre_sacree.jpg",
    "rose_obscure.jpg",
    "sanctuaire-fleurs-nuit.jpg",
    "sous-le-cerisier.jpg",
    "sphere.jpg",
    "sphere_cerisier.jpg",
    "star.jpg",
    "sugestive.jpg",
    "sun.jpg",
    "temps_eclate.jpg",
    "torche-solaire-femme.jpg",
    "tree.jpg",
    "treehid.jpg",
    "treehouse.jpg",
    "treeplane.jpg",
    "unif.jpg",
    "union_ames.jpg",
    "union_solaire.jpg",
    "vieux_monsieur.jpg",
    "voie-lactee-contemplation.jpg",
    "weird.jpg",
    "weird2.jpg",
    "weirdtextaerth.jpg",
    "wow-2.jpg",
    "wow-3.jpg",
    "wow.jpg",
    "wow4.jpg",
    "wow79.jpg",
];

// Fonction utilitaire pour mélanger un tableau
function shuffle(array) {
    for (let i = array.length - 1; i > 0; i--) {
        const j = Math.floor(Math.random() * (i + 1));
        [array[i], array[j]] = [array[j], array[i]];
    }
}

// Fonction principale pour afficher les images
function afficherImagesAleatoires() {
    const galerie = document.getElementById('gallerie-infinie');
    if (!galerie) return;
    galerie.innerHTML = '';

    // Mélanger et sélectionner 28 images
    const imagesMelangees = imagesGallerieInfinie.slice();
    shuffle(imagesMelangees);
    const imagesAffichees = imagesMelangees.slice(0, 28);

    // Charger les métadonnées puis afficher les images
    fetch('images/gallerie_infinie/image_metadata.json')
        .then(response => response.json())
        .then(metadata => {
            imagesAffichees.forEach(nomImage => {
                const meta = metadata[nomImage] || {};
                const titre = meta.title || '';
                const description = meta.description || '';
                // Création du bloc HTML harmonisé
                const div = document.createElement('div');
                div.className = 'art-piece';
                div.onclick = function() { showFullscreen(this); };
                div.innerHTML = `
                    <img src="images/gallerie_infinie/${nomImage}" alt="${titre}">
                    <div class="art-piece-content">
                        <h2>${titre}</h2>
                        <p>${description.replace(/\n/g, '<br>')}</p>
                    </div>
                `;
                galerie.appendChild(div);
            });
        });
}

// Appel initial
window.addEventListener('DOMContentLoaded', afficherImagesAleatoires);
