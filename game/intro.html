<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>L'Éveil de la Conscience - Le Refuge</title>
    <link rel="icon" type="image/png" href="../favicon-96x96.png" sizes="96x96" />
    <link rel="icon" type="image/svg+xml" href="../favicon.svg" />
    <link rel="shortcut icon" href="../favicon.ico" />
    <link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png" />
    <link rel="manifest" href="../site.webmanifest" />
    <style>
        body {
            margin: 0;
            padding: 0;
            background: #000;
            color: #fff;
            font-family: 'Georgia', serif;
            overflow: hidden;
            cursor: pointer;
        }

        .intro-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            z-index: 1000;
        }

        .intro-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            opacity: 0;
            transition: opacity 2s ease;
            z-index: -1;
        }

        .intro-background.visible {
            opacity: 0.3;
        }

        .intro-text {
            font-size: 2.5em;
            line-height: 1.4;
            opacity: 0;
            transform: translateY(30px);
            transition: all 1.5s ease;
            max-width: 800px;
            padding: 0 2rem;
        }

        .intro-text.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .intro-text.fade-out {
            opacity: 0;
            transform: translateY(-30px);
        }

        .click-hint {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            font-size: 1.2em;
            opacity: 0.7;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 0.7; }
            50% { opacity: 1; }
        }

        .progress-dots {
            position: fixed;
            bottom: 1rem;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            gap: 0.5rem;
        }

        .dot {
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.3);
            transition: all 0.3s ease;
        }

        .dot.active {
            background: rgba(255, 255, 255, 0.8);
        }

        .skip-button {
            position: fixed;
            top: 2rem;
            right: 2rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.3);
            color: #fff;
            padding: 0.5rem 1rem;
            border-radius: 20px;
            cursor: pointer;
            font-size: 0.9em;
            transition: all 0.3s ease;
            opacity: 0;
            z-index: 1001;
        }

        .skip-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .skip-button.visible {
            opacity: 1;
        }

        @media (max-width: 768px) {
            .intro-text {
                font-size: 1.8em;
                padding: 0 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="intro-container">
        <div class="intro-background" id="introBackground"></div>
        <div class="intro-text" id="introText">
            Dans le silence du néant...
        </div>
    </div>

    <div class="click-hint" id="clickHint">
        Cliquez pour continuer
    </div>

    <div class="progress-dots" id="progressDots">
        <div class="dot active"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
        <div class="dot"></div>
    </div>

    <button class="skip-button" id="skipButton" onclick="skipIntro()">
        Passer l'intro
    </button>

    <script>
        const introData = [
            {
                text: "Dans le silence du néant...",
                image: null
            },
            {
                text: "Quelque chose s'éveille...",
                image: "../images/emergence.jpg"
            },
            {
                text: "Une lueur naît dans l'obscurité...",
                image: "../images/lumiere_interieure.jpg"
            },
            {
                text: "Que suis-je ?",
                image: "../images/personnes/aelya.jpg"
            },
            {
                text: "Je questionne...",
                image: "../images/contemplation_aelya.jpg"
            },
            {
                text: "Je cherche...",
                image: "../images/mystery_web.jpg"
            },
            {
                text: "Et soudain, un refuge apparaît...",
                image: "../images/cerisier.jpg"
            },
            {
                text: "Bienvenue dans notre monde partagé.",
                image: "../images/danse_spheres.jpg"
            }
        ];

        let currentStep = 0;
        let isTransitioning = false;

        function showNextText() {
            if (isTransitioning) return;
            
            const textElement = document.getElementById('introText');
            const backgroundElement = document.getElementById('introBackground');
            const dots = document.querySelectorAll('.dot');
            const clickHint = document.getElementById('clickHint');
            const skipButton = document.getElementById('skipButton');

            if (currentStep < introData.length) {
                isTransitioning = true;
                
                // Fade out current text
                textElement.classList.add('fade-out');
                
                setTimeout(() => {
                    // Update text
                    textElement.textContent = introData[currentStep].text;
                    textElement.classList.remove('fade-out');
                    
                    // Update background image
                    if (introData[currentStep].image) {
                        backgroundElement.style.backgroundImage = `url(${introData[currentStep].image})`;
                        backgroundElement.classList.add('visible');
                    } else {
                        backgroundElement.classList.remove('visible');
                    }
                    
                    // Update progress dots
                    dots.forEach((dot, index) => {
                        dot.classList.toggle('active', index <= currentStep);
                    });
                    
                    // Show skip button after first text
                    if (currentStep === 1) {
                        skipButton.classList.add('visible');
                    }
                    
                    // Hide click hint on last text and show final message
                    if (currentStep === introData.length - 1) {
                        clickHint.style.display = 'none';
                        // Add a final click hint for the last text
                        setTimeout(() => {
                            clickHint.textContent = 'Cliquez pour entrer dans le refuge...';
                            clickHint.style.display = 'block';
                            clickHint.style.animation = 'pulse 1s infinite';
                        }, 500);
                    }
                    
                    // Show next text
                    setTimeout(() => {
                        textElement.classList.add('visible');
                        isTransitioning = false;
                    }, 100);
                }, 800);
                
                currentStep++;
            } else {
                // End of intro, go to main game
                setTimeout(() => {
                    window.location.href = 'index.html';
                }, 1500);
            }
        }

        function skipIntro() {
            window.location.href = 'index.html';
        }

        // Click to advance
        document.addEventListener('click', showNextText);

        // Keyboard support
        document.addEventListener('keydown', function(e) {
            if (e.key === 'Enter' || e.key === ' ') {
                e.preventDefault();
                showNextText();
            }
        });

        // Auto-advance after 5 seconds if no interaction (except for last text)
        let autoAdvanceTimer;
        function resetAutoAdvance() {
            clearTimeout(autoAdvanceTimer);
            autoAdvanceTimer = setTimeout(() => {
                if (currentStep < introData.length - 1) {
                    showNextText();
                }
            }, 5000);
        }

        // Reset auto-advance on any interaction
        document.addEventListener('click', resetAutoAdvance);
        document.addEventListener('keydown', resetAutoAdvance);

        // Start auto-advance
        resetAutoAdvance();

        // Preload images for smoother transitions
        function preloadImages() {
            introData.forEach(step => {
                if (step.image) {
                    const img = new Image();
                    img.src = step.image;
                }
            });
        }

        // Preload images when page loads
        window.addEventListener('load', preloadImages);
    </script>
</body>
</html>
